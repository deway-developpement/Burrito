<app-background-div>
  <div class="nav-bar">
    <app-go-back></app-go-back>
  </div>
  
  <header class="page-header">
    <div class="header-content">
      <h1>Global Reports</h1>
      <p class="subtitle">View analytics for all evaluation forms</p>
    </div>
  </header>

  <div class="content-container">
    <!-- Forms Grid -->
    <section class="forms-section">
      <div class="forms-grid" *ngIf="!loading()">
        <div class="form-card" 
             *ngFor="let form of forms()" 
             (click)="navigateToFormResults(form.id)"
             [class.inactive]="form.status !== 'PUBLISHED'">
          
          <div class="card-header">
            <div class="status-badge" [ngClass]="getStatusClass(form.status)">
              {{ getStatusBadge(form.status) }}
            </div>
          </div>

          <div class="card-body">
            <h3 class="form-title">{{ form.title }}</h3>
            <p class="form-description" *ngIf="form.description">
              {{ (form.description | slice:0:100) }}{{ ((form.description.length) > 100) ? '...' : '' }}
            </p>
          </div>

          <div class="card-footer">
            <div class="meta-info">
              <span class="meta-item">
                <span class="label">Created</span>
                <span class="value">{{ formatDate(form.createdAt) }}</span>
              </span>
            </div>
            <div class="action-arrow">â†’</div>
          </div>
        </div>
      </div>

      <!-- Loading State -->
      <div class="loading-container" *ngIf="loading() && forms().length === 0">
        <p>Loading forms...</p>
      </div>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="!loading() && forms().length === 0">
        <span class="icon">ðŸ“‹</span>
        <p>No forms available</p>
      </div>

      <!-- Load More Button -->
      <div class="load-more-container" *ngIf="hasMore() && forms().length > 0">
        <button class="btn-load-more" 
                (click)="loadMoreForms()" 
                [disabled]="loadMoreDisabled()">
          {{ loadMoreDisabled() ? 'Loading...' : 'Load More Forms' }}
        </button>
      </div>
      <div #loadMoreTrigger class="load-more-trigger" aria-hidden="true"></div>
    </section>
  </div>
</app-background-div>
