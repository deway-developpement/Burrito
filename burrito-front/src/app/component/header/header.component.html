<header class="home__header">
  <div class="home__logo" routerLink="/">
    <span class="home__logo-icon">ðŸŒ¯</span>
    <span class="home__logo-text">Burrito</span>
  </div>

  <div class="home__actions">
    
    @if (userService.currentUser(); as user) {
      
      <span class="home__welcome">
        Welcome, <strong>{{ user.fullName }}</strong>
      </span>

      <app-button 
        variant="outline" 
        (click)="logout()"
        (keydown.enter)="logout()"
      >
        Logout
      </app-button>

    } @else {

      <app-button
        variant="outline"
        [routerLink]="'/sign-in'"
      >
        Sign in
      </app-button>
    }

  </div>
</header>
@if (userService.currentUser(); as user) {
  @if (!user.emailVerified && !bannerDismissed()) {
    <div class="verify-banner" role="alert">
      <span>Please verify your email to access all features.</span>
      <app-button
        variant="primary"
        size="small"
        [disabled]="isResending()"
        (click)="resendVerification()"
        (keydown.enter)="resendVerification()"
      >
        {{ isResending() ? 'Sendingâ€¦' : 'Resend verification email' }}
      </app-button>
      <button class="verify-banner__close" (click)="dismissBanner()" aria-label="Dismiss banner">
        âœ•
      </button>
    </div>
  }
}

@if (showSuccessModal()) {
  <div class="modal-overlay" (click)="closeModal()" (keydown.escape)="closeModal()">
    <div class="modal" (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()">
      <button class="modal__close" (click)="closeModal()" (keydown.enter)="closeModal()" aria-label="Close modal">âœ•</button>
      <div class="modal__icon">âœ“</div>
      <h2 class="modal__title">Email sent!</h2>
      <p class="modal__message">We've sent a verification link to your email. Please check your inbox and spam folder.</p>
      <app-button variant="primary" (click)="closeModal()" (keydown.enter)="closeModal()">Got it</app-button>
    </div>
  </div>
}