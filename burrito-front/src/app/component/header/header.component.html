<header class="home__header">
  <div class="home__logo" routerLink="/">
    <span class="home__logo-icon">ðŸŒ¯</span>
    <span class="home__logo-text">Burrito</span>
  </div>

  <div class="home__actions">
    <div class="home__locale">
      <select
        class="home__locale-select"
        [value]="activeLocale"
        (change)="onLocaleChange($any($event.target).value)"
        i18n-aria-label="@@header.languageSelector"
        aria-label="Language"
      >
        <option value="en" [selected]="activeLocale === 'en'">EN</option>
        <option value="fr" [selected]="activeLocale === 'fr'">FR</option>
        <option value="de" [selected]="activeLocale === 'de'">DE</option>
        <option value="es" [selected]="activeLocale === 'es'">ES</option>
      </select>
    </div>

    @if (userService.currentUser(); as user) {
      
      <span class="home__welcome" i18n="@@header.welcome">
        Welcome, <strong>{{ user.fullName }}</strong>
      </span>

      <app-button 
        variant="outline" 
        (click)="logout()"
        (keydown.enter)="logout()"
        class="home__logout-button"
      >
        <span i18n="@@header.logout">Logout</span>
      </app-button>

    } @else {

      <app-button
        variant="outline"
        [routerLink]="'/sign-in'"
      >
        <span i18n="@@header.signIn">Sign in</span>
      </app-button>
    }

  </div>
</header>
@if (userService.currentUser(); as user) {
  @if (!user.emailVerified && !bannerDismissed()) {
    <div class="verify-banner" role="alert">
      <span i18n="@@header.verifyEmail">Please verify your email to access all features.</span>
      <app-button
        variant="primary"
        size="small"
        [disabled]="isResending()"
        (click)="resendVerification()"
        (keydown.enter)="resendVerification()"
      >
        @if (isResending()) {
          <span i18n="@@header.sending">Sending...</span>
        } @else {
          <span i18n="@@header.resendVerificationButton">Resend verification email</span>
        }
      </app-button>
      <button class="verify-banner__close" (click)="dismissBanner()" aria-label="Dismiss banner">
        âœ•
      </button>
    </div>
  }
}

@if (showSuccessModal()) {
  <div class="modal-overlay" (click)="closeModal()" (keydown.escape)="closeModal()">
    <div class="modal" (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()">
      <button class="modal__close" (click)="closeModal()" (keydown.enter)="closeModal()" aria-label="Close modal">âœ•</button>
      <div class="modal__icon">âœ“</div>
      <h2 class="modal__title">Email sent!</h2>
      <p class="modal__message">We've sent a verification link to your email. Please check your inbox and spam folder.</p>
      <app-button variant="primary" (click)="closeModal()" (keydown.enter)="closeModal()">Got it</app-button>
    </div>
  </div>
}
